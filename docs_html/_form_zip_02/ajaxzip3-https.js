function zipdata(e){AjaxZip3.callback(e)}function sortObj(e,a,i,t){function p(e,p){var r=a?"key":"value",n=e[r],x=p[r];return i?(n=parseFloat(n),x=parseFloat(x)):(n=String(n),x=String(x)),t?n>x?-1:x>n?1:0:x>n?-1:n>x?1:0}var r=new Array;for(var n in e)r.push({key:n,value:e[n]});r=r.sort(p);for(var x=new Object,n=0;n<r.length;n++)x[r[n].key]=r[n].value;return x}AjaxZip3=function(){},AjaxZip3.VERSION="0.4",AjaxZip3.JSONDATA="https://ajaxzip3.googlecode.com/svn/trunk/ajaxzip3/zipdata",AjaxZip3.CACHE=[],AjaxZip3.prev="",AjaxZip3.nzip="",AjaxZip3.fzip1="",AjaxZip3.fzip2="",AjaxZip3.fpref="",AjaxZip3.addr="",AjaxZip3.fstrt="",AjaxZip3.farea="",AjaxZip3.listbox="",AjaxZip3.PREFMAP=[null,"北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],AjaxZip3.zip2addr=function(e,a,i,t,p,r,n){if(AjaxZip3.listbox=n,AjaxZip3.fzip1=AjaxZip3.getElementByName(e),AjaxZip3.fzip2=AjaxZip3.getElementByName(a,AjaxZip3.fzip1),AjaxZip3.fpref=AjaxZip3.getElementByName(i,AjaxZip3.fzip1),AjaxZip3.faddr=AjaxZip3.getElementByName(t,AjaxZip3.fzip1),AjaxZip3.fstrt=AjaxZip3.getElementByName(p,AjaxZip3.fzip1),AjaxZip3.farea=AjaxZip3.getElementByName(r,AjaxZip3.fzip1),AjaxZip3.fzip1){if(AjaxZip3.fzip1.value.length<3){var x=document.getElementById(AjaxZip3.listbox);return(x.style.display="none")&&(x.style.display="none"),void 0}if(AjaxZip3.fpref&&AjaxZip3.faddr){var A=AjaxZip3.fzip1.value;if(AjaxZip3.fzip2&&AjaxZip3.fzip2.value&&(A+=AjaxZip3.fzip2.value),A){AjaxZip3.nzip="";for(var f=0;f<A.length;f++){var j=A.charCodeAt(f);48>j||j>57||(AjaxZip3.nzip+=A.charAt(f))}var l=AjaxZip3.nzip.substr(0,3),Z=AjaxZip3.CACHE[l];return Z?AjaxZip3.callback(Z):(AjaxZip3.zipjsonpquery(),void 0)}}}},AjaxZip3.callback=function(e){if(AjaxZip3.nzip.length<7){AjaxZip3.fpref.value="",AjaxZip3.faddr.value="",AjaxZip3.fstrt.value="";for(var a=$("#"+AjaxZip3.listbox+" ul")[0];a.lastChild;)a.removeChild(a.lastChild);e=sortObj(e,!0);for(i in e)if(i.match("^"+AjaxZip3.nzip)){var t=document.createElement("li");t.addEventListener?t.addEventListener("click",function(a){return function(){AjaxZip3.fzip2.value=a.substr(3,5),AjaxZip3.nzip=a,AjaxZip3.callback(e)}}(i),!1):t.attachEvent("onclick",function(a){return function(){AjaxZip3.fzip2.value=a.substr(3,5),AjaxZip3.nzip=a,AjaxZip3.callback(e)}}(i),!1);var p=e[i][1]?e[i][1]:"";p+=e[i][2]?e[i][2]:"",p+=e[i][3]?e[i][3]:"",t.appendChild(document.createTextNode(i+":"+p)),a.appendChild(t)}document.getElementById(AjaxZip3.listbox).style.display=""}else{document.getElementById(AjaxZip3.listbox).style.display="none";var r=e[AjaxZip3.nzip],n=AjaxZip3.nzip-0+4278190080+"";if(!r&&e[n]&&(r=e[n]),!r)return;var x=r[0];if(!x)return;var A=AjaxZip3.PREFMAP[x];if(!A)return;var f=r[1];f||(f="");var j=r[2];j||(j="");var l=r[3];l||(l=""),l=j+l,j="";var Z=AjaxZip3.faddr,u=f;if("select-one"==AjaxZip3.fpref.type||"select-multiple"==AjaxZip3.fpref.type)for(var s=AjaxZip3.fpref.options,o=0;o<s.length;o++){var c=s[o].value,d=s[o].text;s[o].selected=c==x||c==A||d==A}else AjaxZip3.fpref.name==AjaxZip3.faddr.name?u=A+u:AjaxZip3.fpref.value=A;if(AjaxZip3.farea?(Z=AjaxZip3.farea,AjaxZip3.farea.value=j):u+=j,AjaxZip3.fstrt&&(Z=AjaxZip3.fstrt,AjaxZip3.faddr.name==AjaxZip3.fstrt.name?u+=l:l&&(AjaxZip3.fstrt.value=l)),AjaxZip3.faddr.value=u,!Z)return;if(!Z.value)return;var v=Z.value.length;if(Z.focus(),Z.createTextRange){var m=Z.createTextRange();m.move("character",v),m.select()}else Z.setSelectionRange&&Z.setSelectionRange(v,v)}},AjaxZip3.getResponseText=function(e){var a=e.responseText;if(navigator.appVersion.indexOf("KHTML")>-1){var i=escape(a);i.indexOf("%u")<0&&i.indexOf("%")>-1&&(a=decodeURIComponent(i))}return a},AjaxZip3.getElementByName=function(e,a){if("string"==typeof e){var i=document.getElementsByName(e);if(!i)return null;if(!(i.length>1&&a&&a.form))return i[0];for(var t=a.form.elements,p=0;p<t.length;p++)if(t[p].name==e)return t[p]}return e},AjaxZip3.zipjsonpquery=function(){var e=AjaxZip3.JSONDATA+"/zip-"+AjaxZip3.nzip.substr(0,3)+".js",a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",e),a.setAttribute("charset","UTF-8"),document.getElementsByTagName("head").item(0).appendChild(a)};